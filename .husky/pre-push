#!/usr/bin/env sh

echo "ğŸ§ª Running pre-push tests..."

# Frontend ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd games/project-da-vinci/frontend || exit 1

# 1. ì „ì²´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ“¦ Running unit tests..."
npm run test:run

if [ $? -ne 0 ]; then
  echo "âŒ Unit tests failed. Push aborted."
  exit 1
fi

# 2. ë¹Œë“œ í…ŒìŠ¤íŠ¸
echo "ğŸ—ï¸ Testing build..."
npm run build

if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Push aborted."
  exit 1
fi

echo "âœ… All pre-push checks passed! Pushing to remote..."
