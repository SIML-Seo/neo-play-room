# Project Da Vinci - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> 50ì¸ ë™ì‹œ ì ‘ì†, ì‹¤ì‹œê°„ í˜‘ë™ ë“œë¡œì‰ì„ ìœ„í•œ ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ“ ì•„í‚¤í…ì²˜ ê°œìš”

Project Da VinciëŠ” **ì„œë²„ë¦¬ìŠ¤(Serverless)** ë° **BaaS(Backend as a Service)** ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì–´, 2ê°œì›” ê°œë°œ ì£¼ê¸° ë‚´ì— ì¸í”„ë¼ ê´€ë¦¬ ì—†ì´ ê²Œì„ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

1. **No Server Management**: ë°±ì—”ë“œ ì„œë²„ ì§ì ‘ êµ¬ì¶• ë° ê´€ë¦¬ ì œê±°
2. **Real-time First**: 5ì¸ í˜‘ë™ ë“œë¡œì‰ì„ ìœ„í•œ ì‹¤ì‹œê°„ ë™ê¸°í™” ìµœìš°ì„ 
3. **AI as a Player**: AIë¥¼ ë‹¨ìˆœ ë„êµ¬ê°€ ì•„ë‹Œ ê²Œì„ì˜ í•µì‹¬ í”Œë ˆì´ì–´ë¡œ ì„¤ê³„
4. **Cost Efficiency**: ì›” $20 ì´í•˜ ìš´ì˜ ë¹„ìš© ëª©í‘œ

---

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì‚¬ìš©ì (50ëª…)                               â”‚
â”‚                     â†“ (HTTPS, WebSocket-like)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    [Firebase Hosting / Vercel]                       â”‚
â”‚                    React SPA (ì •ì  íŒŒì¼ ì„œë¹™)                         â”‚
â”‚  - /: ë©”ì¸ í˜ì´ì§€ (ë¡œê·¸ì¸)                                             â”‚
â”‚  - /lobby: ëŒ€ê¸°ì‹¤ (íŒ€ í™•ì¸)                                           â”‚
â”‚  - /game/:roomId: ê²Œì„ ë£¸ (ìº”ë²„ìŠ¤ + ì±„íŒ…)                             â”‚
â”‚  - /results: ê²°ê³¼ í™”ë©´ (ìˆœìœ„ ë° ë¦¬ë”ë³´ë“œ)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â†“ (1.ì¸ì¦)           â†“ (2.ì‹¤ì‹œê°„ ë™ê¸°í™”)   â†“ (3.AI ì¶”ë¡  ìš”ì²­)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firebase Auth   â”‚  â”‚  Realtime Database  â”‚  â”‚  Cloud Functions   â”‚
â”‚  (Google SSO)    â”‚  â”‚  (WebSocket-like)   â”‚  â”‚  (Serverless)      â”‚
â”‚                  â”‚  â”‚                     â”‚  â”‚                    â”‚
â”‚ - ì‚¬ìš©ì ì‹ë³„     â”‚  â”‚ /gameRooms/{id}     â”‚  â”‚ judgeDrawing()     â”‚
â”‚ - í† í° ë°œê¸‰       â”‚  â”‚ /liveDrawings/{id}  â”‚  â”‚ matchPlayers()     â”‚
â”‚ - í”„ë¡œí•„ ì •ë³´     â”‚  â”‚ /chatMessages/{id}  â”‚  â”‚ finalizeGame()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â†“ (4.AI API í˜¸ì¶œ)
                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚   Gemini 1.5 Flash  â”‚
                                               â”‚   (Vision API)      â”‚
                                               â”‚                     â”‚
                                               â”‚ - ì´ë¯¸ì§€ ì¸ì‹        â”‚
                                               â”‚ - ë‹¨ì–´ ì¶”ë¡           â”‚
                                               â”‚ - JSON ì‘ë‹µ          â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“ (5.ê²Œì„ ë¡œê·¸ ì €ì¥)
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Cloud Storage            â”‚
                   â”‚  (ì•„ì¹´ì´ë¹™)                â”‚
                   â”‚                           â”‚
                   â”‚ /drawings/{roomId}.png    â”‚
                   â”‚ /logs/{roomId}.json       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ ìƒì„¸

### 1. í”„ë¡ íŠ¸ì—”ë“œ (Client)

| í•­ëª© | ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
|-----|------|----------|
| **í”„ë ˆì„ì›Œí¬** | React 18 (Vite) | ë¹ ë¥¸ ê°œë°œ, HMR, ê°€ë²¼ìš´ ë²ˆë“¤ |
| **ìº”ë²„ìŠ¤** | Fabric.js 5.x | ê°ì²´ ê¸°ë°˜ ìº”ë²„ìŠ¤ ì œì–´, JSON ì§ë ¬í™” ì§€ì› |
| **ìƒíƒœ ê´€ë¦¬** | Zustand | Reduxë³´ë‹¤ ê²½ëŸ‰, Firebase RTDBì™€ ê¶í•© ì¢‹ìŒ |
| **ìŠ¤íƒ€ì¼ë§** | Tailwind CSS | ë¹ ë¥¸ UI ê°œë°œ, ë°˜ì‘í˜• ë””ìì¸ |
| **ë¼ìš°íŒ…** | React Router v6 | SPA í˜ì´ì§€ ì „í™˜ |
| **Firebase SDK** | Firebase JS SDK v9+ | ëª¨ë“ˆí™”ëœ ì„í¬íŠ¸, ë²ˆë“¤ í¬ê¸° ìµœì†Œí™” |

**í•µì‹¬ ë¡œì§:**
- Fabric.jsì˜ `canvas.toJSON()`ìœ¼ë¡œ ìº”ë²„ìŠ¤ ìƒíƒœë¥¼ JSON ì§ë ¬í™”
- Firebase RTDBì— `set()` â†’ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê°€ `onValue()` êµ¬ë…
- `canvas.loadFromJSON()`ìœ¼ë¡œ ì¦‰ì‹œ ë™ê¸°í™”

### 2. ë°±ì—”ë“œ (Backend as a Service)

#### Firebase Ecosystem

| ì„œë¹„ìŠ¤ | ìš©ë„ | í”Œëœ |
|--------|------|------|
| **Authentication** | Google SSO ë¡œê·¸ì¸, ì‚¬ìš©ì ì‹ë³„ | Spark (ë¬´ë£Œ) |
| **Realtime Database** | ì‹¤ì‹œê°„ ìº”ë²„ìŠ¤/ì±„íŒ… ë™ê¸°í™” | Spark (ë¬´ë£Œ) |
| **Cloud Functions** | AI ì¶”ë¡ , ê²Œì„ ë¡œì§ (ì„œë²„ë¦¬ìŠ¤) | Blaze (ì¢…ëŸ‰ì œ) |
| **Cloud Storage** | ê²Œì„ ë¡œê·¸ ë° ì´ë¯¸ì§€ ì•„ì¹´ì´ë¹™ | Blaze (ì¢…ëŸ‰ì œ) |
| **Hosting** | React ì •ì  íŒŒì¼ ì„œë¹™ (CDN) | Spark (ë¬´ë£Œ) |

**Realtime Database vs Firestore:**
- **RTDB ì„ íƒ**: ì‹¤ì‹œê°„ ë™ê¸°í™”ê°€ Firestoreë³´ë‹¤ ë¹ ë¦„ (WebSocket ê¸°ë°˜)
- FirestoreëŠ” ë³µì¡í•œ ì¿¼ë¦¬ì— ê°•í•˜ì§€ë§Œ, ì´ í”„ë¡œì íŠ¸ëŠ” ë‹¨ìˆœí•œ key-value êµ¬ì¡°ë¡œ ì¶©ë¶„

#### Cloud Functions (Node.js 18+)

```javascript
// functions/src/index.ts
export const judgeDrawing = functions.https.onCall(async (data, context) => {
  // AI ì¶”ë¡  ë¡œì§ (Genkit ì‚¬ìš©)
});

export const matchPlayers = functions.pubsub.schedule('0 9 * * 1').onRun(async () => {
  // ë§¤ì£¼ ì›”ìš”ì¼ 09:00 ìë™ íŒ€ ë§¤ì¹­
});

export const finalizeGame = functions.database.ref('/gameRooms/{roomId}/status')
  .onUpdate(async (change, context) => {
    // ê²Œì„ ì¢…ë£Œ ì‹œ ë¡œê·¸ ì €ì¥
  });
```

### 3. AI (Gemini API)

| í•­ëª© | ì„¸ë¶€ì‚¬í•­ |
|-----|----------|
| **ëª¨ë¸** | Gemini 1.5 Flash (gemini-1.5-flash-latest) |
| **ì…ë ¥** | ì´ë¯¸ì§€ (Base64 ë˜ëŠ” GCS URI) + í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ |
| **ì¶œë ¥** | JSON í˜•ì‹ (`{"guess": "ë°±ì„¤ê³µì£¼", "confidence": 0.85}`) |
| **ë¹„ìš©** | $0.00001875/ì´ë¯¸ì§€ (~300íšŒ í˜¸ì¶œ ì‹œ $5-10) |
| **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜** | Firebase Genkit (v0.5+) |

**Genkit ì‚¬ìš© ì´ìœ :**
- Cloud Function ë‚´ì—ì„œ API í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬
- í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬ ë° A/B í…ŒìŠ¤íŠ¸ ìš©ì´
- ë©€í‹°ëª¨ë‹¬(Vision) API ì¶”ìƒí™”

---

## ğŸ’¾ ë°ì´í„° ëª¨ë¸ (Database Schema)

### Firebase Realtime Database êµ¬ì¡°

```json
{
  "users": {
    "uid-player-1": {
      "displayName": "ê¹€ê°œë°œ",
      "email": "kim@neolab.com",
      "department": "ê°œë°œíŒ€",
      "photoURL": "https://..."
    }
  },

  "gameRooms": {
    "room-abc123": {
      "status": "in-progress",           // 'waiting' | 'in-progress' | 'finished'
      "theme": "ë™í™”",                    // ê²Œì„ ì£¼ì œ
      "targetWord": "ë°±ì„¤ê³µì£¼",           // ì •ë‹µ ë‹¨ì–´
      "currentTurn": "uid-player-2",     // í˜„ì¬ í„´ í”Œë ˆì´ì–´ UID
      "turnOrder": ["uid-1", "uid-2", "uid-3", "uid-4", "uid-5"],
      "currentTurnIndex": 1,             // 0-based ì¸ë±ìŠ¤
      "maxTurns": 10,
      "turnCount": 2,                    // í˜„ì¬ê¹Œì§€ ì†Œë¹„í•œ í„´ ìˆ˜
      "startTime": 1678886400000,        // Unix timestamp (ms)
      "players": {
        "uid-player-1": { "name": "ê¹€ê°œë°œ", "team": "A", "ready": true },
        "uid-player-2": { "name": "ì´ì†Œí†µ", "team": "A", "ready": true },
        "uid-player-3": { "name": "ë°•ê¸°íš", "team": "A", "ready": true },
        "uid-player-4": { "name": "ìµœë””ìì¸", "team": "A", "ready": true },
        "uid-player-5": { "name": "ì •ë§ˆì¼€íŒ…", "team": "A", "ready": true }
      },
      "aiGuesses": [
        { "turn": 1, "guess": "ì‚¬ê³¼", "confidence": 0.72, "timestamp": 1678886401000 },
        { "turn": 2, "guess": "ê³µì£¼", "confidence": 0.65, "timestamp": 1678886462000 }
      ]
    }
  },

  "liveDrawings": {
    "room-abc123": {
      "canvasState": "{\"version\":\"5.3.0\",\"objects\":[...]}",  // Fabric.js JSON
      "lastUpdatedBy": "uid-player-2",
      "lastUpdatedAt": 1678886462000
    }
  },

  "chatMessages": {
    "room-abc123": {
      "msg-001": {
        "uid": "uid-player-1",
        "displayName": "ê¹€ê°œë°œ",
        "text": "ì œê°€ ì‚¬ê³¼ ë¨¼ì € ê·¸ë¦´ê²Œìš”",
        "timestamp": 1678886400500
      },
      "msg-002": {
        "uid": "uid-player-2",
        "displayName": "ì´ì†Œí†µ",
        "text": "ì¢‹ì•„ìš”! ì €ëŠ” ë‚œìŸì´ ì¶”ê°€í• ê²Œìš”",
        "timestamp": 1678886401200
      }
    }
  },

  "gameLogs": {
    "log-abc123": {
      "roomId": "room-abc123",
      "theme": "ë™í™”",
      "targetWord": "ë°±ì„¤ê³µì£¼",
      "finalTurnCount": 5,
      "finalTime": 180500,                  // ms
      "winningTeam": "room-abc123",
      "finalImageUri": "gs://bucket/drawings/room-abc123-final.png",
      "aiGuessList": [...],                 // aiGuesses ë°°ì—´ ë³µì‚¬
      "completedAt": 1678886580500
    }
  }
}
```

### ë°ì´í„° íë¦„ ìµœì í™”

**ì‹¤ì‹œê°„ ë™ê¸°í™” ìµœì í™”:**
```javascript
// âŒ ë¹„íš¨ìœ¨: ì „ì²´ ê²Œì„ ë£¸ êµ¬ë…
database.ref('/gameRooms/room-abc123').on('value', ...)

// âœ… íš¨ìœ¨: í•„ìš”í•œ ê²½ë¡œë§Œ êµ¬ë…
database.ref('/liveDrawings/room-abc123/canvasState').on('value', ...)
database.ref('/chatMessages/room-abc123').on('child_added', ...)
```

**ë³´ì•ˆ ê·œì¹™ (Security Rules):**
```json
{
  "rules": {
    "gameRooms": {
      "$roomId": {
        ".read": "auth != null && data.child('players').child(auth.uid).exists()",
        ".write": "auth != null && data.child('players').child(auth.uid).exists()"
      }
    },
    "liveDrawings": {
      "$roomId": {
        ".read": "auth != null",
        ".write": "auth != null && root.child('gameRooms').child($roomId).child('currentTurn').val() == auth.uid"
      }
    }
  }
}
```

---

## ğŸ”„ í•µì‹¬ ë¡œì§ íë¦„

### 1. ê²Œì„ ì‹œì‘ (ì°¸ê°€ â†’ ë§¤ì¹­)

```
[ì‚¬ìš©ì]
    â†“ (ì°¸ê°€ ì‹ ì²­)
[Firebase Auth] ì¸ì¦ í™•ì¸
    â†“
[Cloud Function: matchPlayers]
    - ì°¸ê°€ì ëª©ë¡ ì½ê¸°
    - 5ëª…ì”© ë¬´ì‘ìœ„ íŒ€ êµ¬ì„±
    - /gameRooms/{roomId} ìƒì„±
    â†“
[í´ë¼ì´ì–¸íŠ¸]
    - í• ë‹¹ëœ roomIdë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    - /game/{roomId} í˜ì´ì§€ ì´ë™
```

### 2. ì‹¤ì‹œê°„ ë“œë¡œì‰ ë™ê¸°í™”

```
[Player 1 - í˜„ì¬ í„´]
    â†“ (ë§ˆìš°ìŠ¤ë¡œ ê·¸ë¦¼ ê·¸ë¦¬ê¸°)
canvas.on('mouse:up', () => {
    const json = canvas.toJSON();
    database.ref(`/liveDrawings/${roomId}/canvasState`).set(json);
})
    â†“ (Firebase RTDBì— JSON ì €ì¥)

[Player 2-5 - ê´€ì „ì]
database.ref(`/liveDrawings/${roomId}/canvasState`).on('value', (snapshot) => {
    const json = snapshot.val();
    canvas.loadFromJSON(json);  // ìº”ë²„ìŠ¤ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
})
    â†“ (ì‹¤ì‹œê°„ìœ¼ë¡œ ë™ì¼í•œ ê·¸ë¦¼ ë Œë”ë§)
```

**ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­:**
- Fabric.js JSONì€ íšì´ ë§ì•„ì§ˆìˆ˜ë¡ í¬ê¸° ì¦ê°€ â†’ ìµœëŒ€ 100KBë¡œ ì œí•œ
- ëŒ€ì•ˆ: ì¦ë¶„ ì—…ë°ì´íŠ¸(Incremental updates) ë˜ëŠ” SVG pathë§Œ ì „ì†¡

### 3. AI ì¶”ë¡  (í„´ ì¢…ë£Œ ì‹œ)

```
[Player 1] í„´ ì¢…ë£Œ ë²„íŠ¼ í´ë¦­
    â†“
[Client]
    - canvas.toDataURL('image/jpeg') â†’ Base64 ë³€í™˜
    - Cloud Function í˜¸ì¶œ: judgeDrawing({ roomId, imageBase64 })
    â†“
[Cloud Function: judgeDrawing]
    - Genkit Flow ì‹¤í–‰
    - Gemini APIì— ì´ë¯¸ì§€ + í”„ë¡¬í”„íŠ¸ ì „ì†¡
    â†“
[Gemini API]
í”„ë¡¬í”„íŠ¸: "Category: ë™í™”. What is this drawing? Respond in Korean."
    â†“ (ì‘ë‹µ)
{"guess": "ë°±ì„¤ê³µì£¼", "confidence": 0.85}
    â†“
[Cloud Function]
    - guess == targetWord?
        - Yes: gameRooms/{roomId}/status = 'finished'
        - No: currentTurnIndex++, turnCount++
    - aiGuesses ë°°ì—´ì— ê²°ê³¼ ì¶”ê°€
    â†“
[Client]
    - gameRooms/{roomId} êµ¬ë… ì¤‘ â†’ status ë³€í™” ê°ì§€
    - 'finished' â†’ /results í˜ì´ì§€ë¡œ ì´ë™
```

### 4. ê²Œì„ ì¢…ë£Œ ë° ë¡œê·¸ ì €ì¥

```
[Database Trigger: onUpdate('/gameRooms/{roomId}/status')]
    â†“
[Cloud Function: finalizeGame]
    - ìµœì¢… ìº”ë²„ìŠ¤ ì´ë¯¸ì§€ ìƒì„± (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì—…ë¡œë“œ)
    - Cloud Storageì— ì €ì¥: /drawings/{roomId}-final.png
    - /gameLogs/{logId} ìƒì„± (ê²°ê³¼ ì•„ì¹´ì´ë¹™)
    - ì „ì²´ íŒ€ ìˆœìœ„ ê³„ì‚° (turnCount, finalTime ê¸°ì¤€)
    â†“
[Client: /results í˜ì´ì§€]
    - gameLogs ì½ê¸° â†’ ë¦¬ë”ë³´ë“œ í‘œì‹œ
    - ìš°ìŠ¹íŒ€ ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
```

---

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ í™˜ê²½ (Local)

```bash
# Firebase Emulator Suite ì‹¤í–‰
firebase emulators:start

# ë¡œì»¬ ì„œë¹„ìŠ¤:
- Auth: http://localhost:9099
- Realtime Database: http://localhost:9000
- Functions: http://localhost:5001
- Hosting: http://localhost:5000
```

### í”„ë¡œë•ì…˜ í™˜ê²½

```
Firebase Hosting (CDN)
    â”œâ”€â”€ Region: asia-northeast3 (ì„œìš¸)
    â””â”€â”€ Custom Domain: play.neolab.com (ì„ íƒ ì‚¬í•­)

Cloud Functions
    â”œâ”€â”€ Region: asia-northeast3
    â””â”€â”€ ë©”ëª¨ë¦¬: 512MB (Gemini API í˜¸ì¶œ ì‹œ ì¶©ë¶„)

Realtime Database
    â””â”€â”€ Region: asia-southeast1 (ì‹±ê°€í¬ë¥´ - ì„œìš¸ ê°€ì¥ ê°€ê¹Œì›€)

Cloud Storage
    â””â”€â”€ Region: asia-northeast3
```

---

## ğŸ“Š ì„±ëŠ¥ ë° ë¹„ìš© ë¶„ì„

### ì˜ˆìƒ íŠ¸ë˜í”½ (50ëª…, 10íŒ€, 1íšŒ ê²Œì„)

| í•­ëª© | ìˆ˜ëŸ‰ | ë¹„ìš© |
|-----|------|------|
| **RTDB ì½ê¸°** | ~50,000íšŒ (ì‹¤ì‹œê°„ ë™ê¸°í™”) | ë¬´ë£Œ (Spark í•œë„ ë‚´) |
| **RTDB ì“°ê¸°** | ~5,000íšŒ (ìº”ë²„ìŠ¤ ì—…ë°ì´íŠ¸) | ë¬´ë£Œ |
| **Cloud Functions ì‹¤í–‰** | ~300íšŒ (AI ì¶”ë¡ ) | $0.40 |
| **Gemini API í˜¸ì¶œ** | ~300íšŒ | $5-10 |
| **Storage ì €ì¥** | ~50MB (ìµœì¢… ì´ë¯¸ì§€) | $0.01 |
| **Hosting íŠ¸ë˜í”½** | ~500MB | ë¬´ë£Œ |

**ì›” ì˜ˆìƒ ë¹„ìš© (ì£¼ 1íšŒ ê²Œì„):**
- ì´í•©: $6-11/íšŒ Ã— 4íšŒ = **$24-44/ì›”**
- ëª©í‘œ($20) ëŒ€ë¹„ ì•½ê°„ ì´ˆê³¼ â†’ ìµœì í™” í•„ìš” (ìºì‹±, ì´ë¯¸ì§€ ì••ì¶•)

### ì„±ëŠ¥ ë³‘ëª© ì§€ì  ë° í•´ê²° ë°©ì•ˆ

| ë³‘ëª© ì§€ì  | ì›ì¸ | í•´ê²° ë°©ì•ˆ |
|----------|------|----------|
| **ìº”ë²„ìŠ¤ ë™ê¸°í™” ì§€ì—°** | JSON í¬ê¸° ì¦ê°€ | Gzip ì••ì¶•, ì¦ë¶„ ì—…ë°ì´íŠ¸ |
| **AI ì¶”ë¡  ì†ë„** | Gemini API ì‘ë‹µ ì‹œê°„ (~2-3ì´ˆ) | í”„ë¡¬í”„íŠ¸ ìµœì í™”, ìºì‹± |
| **ë™ì‹œ ì ‘ì† ë¶€í•˜** | 50ëª… ë™ì‹œ RTDB ì½ê¸° | Connection pooling, CDN ìºì‹± |

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. API í‚¤ ë³´í˜¸

```javascript
// âŒ ì ˆëŒ€ ê¸ˆì§€: í´ë¼ì´ì–¸íŠ¸ì— API í‚¤ ë…¸ì¶œ
const apiKey = "AIzaSyC...";  // í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì— í•˜ë“œì½”ë”©

// âœ… ê¶Œì¥: Cloud Functionì—ì„œë§Œ ì‚¬ìš©
// functions/.env.local
GEMINI_API_KEY=AIzaSyC...

// functions/src/ai/judge.ts
const apiKey = process.env.GEMINI_API_KEY;
```

### 2. RTDB ë³´ì•ˆ ê·œì¹™

- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
- ìì‹ ì´ ì†í•œ ê²Œì„ ë£¸ë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
- í˜„ì¬ í„´ í”Œë ˆì´ì–´ë§Œ ìº”ë²„ìŠ¤ ìˆ˜ì • ê°€ëŠ¥

### 3. XSS ë°©ì§€

- ì±„íŒ… ë©”ì‹œì§€ sanitize (DOMPurify ì‚¬ìš©)
- Fabric.js ê°ì²´ì— ì•…ì˜ì  ìŠ¤í¬ë¦½íŠ¸ ì‚½ì… ë°©ì§€

---

## ğŸ”® í™•ì¥ ê°€ëŠ¥ì„± (Scalability)

### 100ëª… ê·œëª¨ (20íŒ€)ë¡œ í™•ì¥ ì‹œ

- **RTDB**: Spark í”Œëœ í•œë„ ì´ˆê³¼ â†’ **Blaze í”Œëœ í•„ìˆ˜** ($25/ì›” ê³ ì • + ì¢…ëŸ‰ì œ)
- **Cloud Functions**: ë™ì‹œ ì‹¤í–‰ ì œí•œ â†’ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ ì¦ê°€ ($0.40 â†’ $0.80)
- **Gemini API**: í˜¸ì¶œ íšŸìˆ˜ 2ë°° â†’ ë¹„ìš© 2ë°° ($10 â†’ $20)

**ê²°ë¡ **: 100ëª… ê·œëª¨ ì‹œ ì›” $50-70 ì˜ˆìƒ â†’ íšŒì‚¬ ë³µì§€ ì˜ˆì‚°ìœ¼ë¡œ ì¶©ë¶„íˆ ê°ë‹¹ ê°€ëŠ¥

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Firebase Realtime Database ë¬¸ì„œ](https://firebase.google.com/docs/database)
- [Fabric.js ê³µì‹ ë¬¸ì„œ](http://fabricjs.com/docs/)
- [Gemini API ê°€ì´ë“œ](https://ai.google.dev/gemini-api/docs)
- [Firebase Genkit](https://firebase.google.com/docs/genkit)

---

**ë‹¤ìŒ ë¬¸ì„œ**: [FRONTEND.md](./FRONTEND.md) - í”„ë¡ íŠ¸ì—”ë“œ ìƒì„¸ ì„¤ê³„
